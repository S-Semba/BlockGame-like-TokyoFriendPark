(function(t){function e(e){for(var i,a,r=e[0],c=e[1],o=e[2],h=0,b=[];h<r.length;h++)a=r[h],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&b.push(n[a][0]),n[a]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);u&&u(e);while(b.length)b.shift()();return l.push.apply(l,o||[]),s()}function s(){for(var t,e=0;e<l.length;e++){for(var s=l[e],i=!0,r=1;r<s.length;r++){var c=s[r];0!==n[c]&&(i=!1)}i&&(l.splice(e--,1),t=a(a.s=s[0]))}return t}var i={},n={app:0},l=[];function a(e){if(i[e])return i[e].exports;var s=i[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=t,a.c=i,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var u=c;l.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"0ea7":function(t,e,s){},"12b8":function(t,e,s){},2403:function(t,e,s){},"27d3":function(t,e,s){},"2fcc":function(t,e,s){"use strict";s("79ed")},3304:function(t,e,s){"use strict";s("12b8")},3695:function(t,e,s){"use strict";s("b3ec")},"41c8":function(t,e,s){"use strict";s("0ea7")},"56d7":function(t,e,s){"use strict";s.r(e);var i=s("7a23");const n=Object(i["f"])("h3",{class:"animate__animated animate__bounce alert alert-info"}," ブロックを繋げるゲーム ",-1),l={class:"btn-start"},a=Object(i["f"])("br",null,null,-1);function r(t,e,s,r,c,o){const u=Object(i["s"])("OnPlayHeader"),h=Object(i["s"])("TopPageHeader"),b=Object(i["s"])("CellComponent"),d=Object(i["s"])("GameOver"),p=Object(i["s"])("GameClear");return Object(i["n"])(),Object(i["e"])(i["a"],null,[n,Object(i["f"])("div",l,[o.isStart?(Object(i["n"])(),Object(i["d"])(u,Object(i["m"])(Object(i["k"])({key:0},{functionsOnButtonClick:c.functionsOnButtonClick})),null,16)):(Object(i["n"])(),Object(i["d"])(h,Object(i["m"])(Object(i["k"])({key:1},{initMath:o.initMath})),null,16))]),Object(i["g"])(b,Object(i["m"])(Object(i["i"])({displayTable:c.displayTable})),null,16),a,Object(i["w"])(Object(i["g"])(d,Object(i["k"])({class:"alert alert-danger"},{initMath:o.initMath,stage:c.stage}),null,16),[[i["u"],o.isGameOver]]),Object(i["w"])(Object(i["g"])(p,{class:"alert alert-warning",initMath:o.initMath},null,8,["initMath"]),[[i["u"],o.isAllClear]])],64)}s("14d9");const c=t=>(Object(i["p"])("data-v-88b7e42e"),t=t(),Object(i["o"])(),t),o=c(()=>Object(i["f"])("br",null,null,-1)),u=c(()=>Object(i["f"])("br",null,null,-1)),h=c(()=>Object(i["f"])("p",null,"ブロックはCtrlキーでも止まります",-1));function b(t,e,s,n,l,a){return Object(i["n"])(),Object(i["e"])("div",null,[Object(i["f"])("button",{onClick:e[0]||(e[0]=(...t)=>s.functionsOnButtonClick.initMath&&s.functionsOnButtonClick.initMath(...t)),class:"btn btn-secondary"}," 最初からやり直す "),Object(i["f"])("button",{onClick:e[1]||(e[1]=(...t)=>s.functionsOnButtonClick.goToTop&&s.functionsOnButtonClick.goToTop(...t)),class:"btn btn-secondary"}," トップに戻る"),o,u,h,a.isGameOver||a.isAllClear?(Object(i["n"])(),Object(i["e"])("button",{key:0,onClick:e[2]||(e[2]=(...t)=>s.functionsOnButtonClick.initMath&&s.functionsOnButtonClick.initMath(...t)),class:"btn btn-outline-primary btn-lg"}," もう一回やる ")):(Object(i["n"])(),Object(i["e"])("button",{key:1,onClick:e[3]||(e[3]=(...t)=>s.functionsOnButtonClick.stopBlock&&s.functionsOnButtonClick.stopBlock(...t)),class:"btn btn-outline-primary btn-lg"}," ブロックを止める "))])}var d={name:"OnPlayHeader",props:{functionsOnButtonClick:Object},computed:{isGameOver(){return this.$store.getters.isGameOver},isAllClear(){return this.$store.getters.isAllClear}}},p=(s("3695"),s("6b0d")),O=s.n(p);const f=O()(d,[["render",b],["__scopeId","data-v-88b7e42e"]]);var m=f,j=s("d368"),v=s.n(j);const g=t=>(Object(i["p"])("data-v-6c3be972"),t=t(),Object(i["o"])(),t),k=g(()=>Object(i["f"])("h5",null," ブロックを止めて繋げていき、右の壁まで到達したらクリア ",-1)),y=g(()=>Object(i["f"])("img",{src:v.a},null,-1));function C(t,e,s,n,l,a){return Object(i["n"])(),Object(i["e"])("div",null,[Object(i["f"])("button",{onClick:e[0]||(e[0]=(...t)=>s.initMath&&s.initMath(...t)),class:"btn btn-primary"}," 始める "),k,y])}var B={name:"TopPageHeader",data(){return{}},props:{initMath:Function}};s("a7ca");const _=O()(B,[["render",C],["__scopeId","data-v-6c3be972"]]);var T=_;function I(t,e,s,n,l,a){return Object(i["n"])(),Object(i["e"])("div",null,[(Object(i["n"])(!0),Object(i["e"])(i["a"],null,Object(i["r"])(s.displayTable,(t,e)=>Object(i["w"])((Object(i["n"])(),Object(i["e"])("li",{key:e,class:Object(i["l"])(["animate__animated",{animate__bounce:a.isBounce}])},[(Object(i["n"])(!0),Object(i["e"])(i["a"],null,Object(i["r"])(t,(t,e)=>(Object(i["n"])(),Object(i["e"])("span",{key:e,class:Object(i["l"])(a.getColor(t))},null,2))),128))],2)),[[i["u"],a.isStart]])),128))])}var M={name:"CellComponent",props:{displayTable:Array},computed:{isStart(){return this.$store.getters.isStart},isBounce(){return this.$store.getters.isBounce}},methods:{getColor:function(t){return-1===t?"blue":1===t?"yellow":void 0}}};s("7023");const S=O()(M,[["render",I],["__scopeId","data-v-f8f259f0"]]);var G=S;function w(t,e,s,n,l,a){return Object(i["n"])(),Object(i["e"])("div",null,[Object(i["f"])("h2",null,"Game Over 記録は"+Object(i["t"])(s.stage)+"連単でした",1),Object(i["f"])("button",{onClick:e[0]||(e[0]=(...t)=>s.initMath&&s.initMath(...t)),class:"btn btn-secondary"}," もう一回やる ")])}var A={name:"GameOver",props:{initMath:Function,stage:Number}};s("41c8");const $=O()(A,[["render",w],["__scopeId","data-v-820592e8"]]);var U=$;const P=t=>(Object(i["p"])("data-v-2ced7332"),t=t(),Object(i["o"])(),t),D=P(()=>Object(i["f"])("h2",null,"Congratulations 全クリ達成です",-1));function Y(t,e,s,n,l,a){return Object(i["n"])(),Object(i["e"])("div",null,[D,Object(i["f"])("button",{onClick:e[0]||(e[0]=(...t)=>s.initMath&&s.initMath(...t)),class:"btn btn-secondary"}," もう一回やる ")])}var X={name:"GameClear",props:{initMath:Function}};s("3304");const x=O()(X,[["render",Y],["__scopeId","data-v-2ced7332"]]);var F=x,H={name:"App",components:{OnPlayHeader:m,TopPageHeader:T,CellComponent:G,GameOver:U,GameClear:F},data(){return{displaySizeX:6,displaySizeY:8,cellsTable:[],displayTable:[],fallMilliSecond:[150,80,50,30,20,1],fallBlocks:[[[0,0],[1,0],[2,0],[3,0],[4,0]],[[0,1],[1,1],[2,1],[3,1]],[[0,2],[1,2],[2,2]],[[0,3],[1,3],[2,3]],[[0,4],[1,4]],[[0,5]]],currentYX:[],registerList:[],movingBlockColor:1,moveDirection:1,stage:0,timer_id_list:[],functionsOnButtonClick:{initMath:this.initMath,goToTop:this.goToTop,stopBlock:this.stopBlock}}},computed:{score(){return 6===this.stage?"全クリ":this.stage+"連単"},isBounce(){return this.$store.getters.isBounce},isStart(){return this.$store.getters.isStart},isAllClear(){return this.$store.getters.isAllClear},isGameOver(){return this.$store.getters.isGameOver}},methods:{initMath(){while(this.timer_id_list.length>0)clearInterval(this.timer_id_list.shift());this.stage=0,this.$store.dispatch("UpdateIsAllClear",!1),this.$store.dispatch("UpdateIsGameOver",!1),this.cellsTable=[];for(let t=1;t<=this.displaySizeY;t++)this.cellsTable.push(Array(this.displaySizeX).fill(-1));this.displayTable=this.cellsTable,this.createNewBlock(),this.autoFall(),this.$store.dispatch("UpdateIsStart",!0)},getBlock(t,e,s){return s.map((function(s){return[t+s[0],e+s[1]]}))},updateDisplay(){this.displayTable=JSON.parse(JSON.stringify(this.cellsTable));let t=this.getBlock(this.currentYX[0],this.currentYX[1],this.fallBlocks[this.stage]);if(1===this.moveDirection){let e=[t[0][0]-1,t[0][1]];this.fallBlocks[this.stage].length<t.slice(-1)[0][0]+1&&(this.cellsTable[e[0]][e[1]]=-1)}else if(-1===this.moveDirection){let e=[t.slice(-1)[0][0]+1,t[0][1]];this.fallBlocks[this.stage].length<8-t[0][0]&&(this.cellsTable[e[0]][e[1]]=-1)}if(1!==this.moveDirection||8!==t[0][0])if(-1!==this.moveDirection||-1!==t.slice(-1)[0][0]){if(t.slice(-1)[0][0]>=8){let e=t.slice(-1)[0][0]-7;for(let s=1;s<=e;s++)t.pop()}if(t[0][0]<=-1){let e=-1*t[0][0];for(let s=1;s<=e;s++)t.shift()}t.forEach(t=>{this.cellsTable[t[0]][t[1]]=this.movingBlockColor})}else this.moveDirection*=-1;else this.moveDirection*=-1},createNewBlock(){let t=this.fallBlocks[this.stage].length;this.currentYX=[-1*t,0],this.updateDisplay()},moveBlock(t){let e=[this.currentYX[0]+t,this.currentYX[1]];this.currentYX=e,this.updateDisplay()},autoFall(){this.timer_id_list.push(setInterval(function(){this.moveBlock(this.moveDirection)}.bind(this),this.fallMilliSecond[this.stage]))},deleteInvalidBlock(){this.cellsTable=this.displayTable;for(let t=0;t<this.displaySizeY;t++){let e=this.cellsTable[t].slice(0,this.stage+1);e.includes(-1)&&1===this.cellsTable[t][this.stage]&&(this.cellsTable[t][this.stage]=-1)}},judge(){let t=[];this.cellsTable.forEach(e=>{t.push(e.slice(this.stage,this.stage+1)[0])}),t.includes(1)?(this.stage+=1,6===this.stage?this.$store.dispatch("UpdateIsAllClear",!0):(this.createNewBlock(),this.autoFall())):this.$store.dispatch("UpdateIsGameOver",!0)},goToTop(){while(this.timer_id_list.length>0)clearInterval(this.timer_id_list.shift());this.$store.dispatch("UpdateIsStart",!1),this.$store.dispatch("UpdateIsAllClear",!1),this.$store.dispatch("UpdateIsGameOver",!1),this.$store.dispatch("UpdateIsRegisterForm",!1)},stopBlock(){clearInterval(this.timer_id_list.shift()),this.shakeCells(1e3)},sleep(t){return new Promise(e=>setTimeout(e,t))},async shakeCells(t){this.$store.dispatch("UpdateIsBounce",!0),await this.sleep(t),this.$store.dispatch("UpdateIsBounce",!1),this.deleteInvalidBlock(),this.judge()}},mounted(){document.onkeydown=function(t){17!==t.keyCode||this.isGameOver||this.isAllClear||this.stopBlock()}.bind(this)}};s("2fcc");const N=O()(H,[["render",r]]);var z=N,J=s("5502"),E=Object(J["a"])({state:{isBounce:!1,isStart:!1,isAllClear:!1,isGameOver:!1},getters:{isBounce(t){return t.isBounce},isStart(t){return t.isStart},isAllClear(t){return t.isAllClear},isGameOver(t){return t.isGameOver}},mutations:{setIsBounce(t,e){t.isBounce=e},setIsStart(t,e){t.isStart=e},setIsAllClear(t,e){t.isAllClear=e},setIsGameOver(t,e){t.isGameOver=e}},actions:{UpdateIsBounce({commit:t},e){t("setIsBounce",e)},UpdateIsStart({commit:t},e){t("setIsStart",e)},UpdateIsAllClear({commit:t},e){t("setIsAllClear",e)},UpdateIsGameOver({commit:t},e){t("setIsGameOver",e)}}});const L=Object(i["c"])(z);L.use(E),L.mount("#app")},7023:function(t,e,s){"use strict";s("27d3")},"79ed":function(t,e,s){},a7ca:function(t,e,s){"use strict";s("2403")},b3ec:function(t,e,s){},d368:function(t,e,s){t.exports=s.p+"img/description.e27f6b87.jpg"}});
//# sourceMappingURL=app.cf6743e4.js.map